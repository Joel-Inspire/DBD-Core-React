0010 REM "List program to text file <UT2LST>
0030 REM "(C) 1990 BASIC IDEAS, INC; ATLANTA, GA.
0050 BEGIN 
0060 CLOSE (2); ERASE "LISTED"; INVOKE "cp /dev/null UTILS/LISTED"; OPEN (2,ISZ=1)"LISTED"
0065 OPEN (12)"TZ"
0100 REM "
0105 INPUT "ENTER PROGRAM: ",F0$; IF F0$="" THEN GOTO 9900
0110 CLOSE (1); OPEN (1,ERR=0100)F0$
0115 Q$=$0D$+"LOAD"+$22$+F0$+$22$+$0D$+"SAVE"+$22$+F0$+"X"+$22$+",PSZ,2,0"+$0D$
0116 GOSUB 8000
0117 Q$="SAVE"+$22$+F0$+"X"+$22$+$0D$; GOSUB 8000
0120 Q$="DELETE"+$0D$; GOSUB 8000
0520 READ RECORD (1,END=0521)X$; A$=A$+X$; GOTO 0520
0920 P=ASC(A$(12,1))
0930 P=P*3,A$=A$(13+P)
1000 REM 
1020 L0=1,L1=DEC($00$+A$(1,L0))
1030 IF L1=0 THEN L0=3,L1=DEC(A$(1,3))
1100 REM 
1120 Q$=A$(1,L1),A$=A$(L1+1)
1140 Q$=LST(Q$(L0+1))
1150 IF LEN(Q$)>L9 THEN L9=LEN(Q$)
1155 Q$=Q$+$0D$
1160 GOSUB 8000
1800 REM 
1820 IF Q$="09999 END "+$0D$ THEN GOTO 3000
1900 GOTO 1000
3000 REM 
3010 Q$="SAVE"+$22$+F0$+$22$+$0D$
3015 GOSUB 8000
3020 A$=""
3090 GOTO 0100
8000 REM 
8030 FOR X=1 TO LEN(Q$); WRITE RECORD (2)Q$(X,1); GOSUB 8100; NEXT X
8032 WRITE RECORD (12)Q$; WAIT 0
8035 PRINT ""
8040 RETURN 
8100 REM 
8101 RETURN 
8110 WRITE RECORD (12,SIZ=1)Q$(X,1)
8115 PRINT Q$(X,1),
8145 RETURN 
9900 REM 
9920 END 
