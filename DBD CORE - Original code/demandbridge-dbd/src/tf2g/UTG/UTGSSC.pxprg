0010 ! UTGSSC - Search panel with ssp close
0020 ! "5.6 - 12/01/08 - 14.955 - jir
0030 ! "Copyright 2008 DemandBridge, Inc.; Norcross, Georgia
0040 ! "        Licensed Software - All Rights Reserved.
0070 PROCESS "UTGSSC","../UTG/UT.EN"
0080 EXIT 
0090 PROCEED:
0095 SET_FOCUS 0
0100 CLOSE (1,ERR=*NEXT)
0110 CLOSE (2,ERR=*NEXT)
0120 CLOSE (3,ERR=*NEXT)
0125 CLOSE (4,ERR=*NEXT)
0127 OPEN (4)"ZW2"
0130 IOLIST OBJ_NME$,OBJ_C,OBJ_L,OBJ_W,OBJ_H,OBJ_TYPE$,OBJ_TXT$,OBJ_VAL$,OBJ_TAB,OBJ_DEF$,OBJ_DSP$,OBJ_FCS$,OBJ_SEL$,OBJ_MSG$,OBJ_HLP$,OBJ_ATTR$,OBJ_IDX$,OBJ_HOTKEY$,OBJ_QRY$,OBJ_SEC$,OBJ_STS$,OBJ_GRP$,OBJ_NULL$,OBJ_TAG$,OBJ_TBL$,OBJ_INP$,OBJ_OUT$,OBJ_VALID$,OBJ_CLASS$,OBJ_TIP$,OBJ_ORIG$,OBJ_FONT$,OBJ_COLOR$,OBJ_LISTBOX_TYPE$,OBJ_SEP$,OBJ_SCRATCH$,OBJ_POPUP$,OBJ_SIZING$,OBJ_LOGIC1$,OBJ_LOGIC2$,OBJ_POPUP_LOGIC$,OBJ_QRY_BITMAP$,OBJ_QRY_WIDTH,OBJ_QRY_TIP$,OBJ_QRY_ATTR$,OBJ_EXTENSION$,OBJ_DEMAND$,OBJ_DEMAND_LOGIC$,OBJ_BACKGROUND_LOGIC$,OBJ_PERSISTENCE$,OBJ_NOTES$,OBJ_TBL_LEN
0140 T$="/tmp/NADA."+FID(0)
0150 ERASE T$,ERR=*NEXT
0160 INVOKE "ls tf2g>"+T$
0170 OPEN (1)T$
0180 READ (1,END=0350)F$
0185 PRINT @(10,5),"   ",
0190 INVOKE "ls tf2g/"+F$+"/*.EN >"+T$+".2",ERR=0180
0200 OPEN (2)T$+".2"
0210 READ (2,END=0340)LIB$
0220 OPEN (3)LIB$
0230 ML_MESS.CTL'VALUE$=LIB$
0240 K_LIB$=KEY(3,END=0330); READ (3,ERR=0330)IOL=0130; IF MID(K_LIB$,13,4)<>"0000" THEN GOTO 0240
0250 ML_MESS.CTL'VALUE$=LIB$+" Panel : "+K_LIB$(1,12)
0260 IF K_LIB$(1,12)=DIM(12) THEN GOTO 0240
0270 IF POS("SSP:"=OBJ_HOTKEY$)<>0 THEN GOTO SI_ESTA
0280 GOTO 0240
0290 SI_ESTA: B_OBJ$=OBJ_HOTKEY$
0291 XX=POS(" "=OBJ_HOTKEY$); DAT$=OBJ_HOTKEY$(1,XX-1),OBJ_HOTKEY$=OBJ_HOTKEY$(XX+1)
0293 XX=POS(" "=OBJ_HOTKEY$); TIM$=OBJ_HOTKEY$(1,XX-1),OBJ_HOTKEY$=OBJ_HOTKEY$(XX+1)
0295 XX=POS(" "=OBJ_HOTKEY$); USR$=OBJ_HOTKEY$(1,XX-1),OBJ_HOTKEY$=OBJ_HOTKEY$(XX+1)
0297 XX=POS("SSP:"=OBJ_HOTKEY$),SSP$=OBJ_HOTKEY$(XX+4)
0298 FIND (4,KEY=SSP$,DOM=*NEXT)AA$; IF POS(AA$(195,1)="CG")=0 THEN GOTO 0240
0300 IF MID(OBJ_TXT$,1,1)="=" THEN TT$=EVS(OBJ_TXT$(2)) ELSE TT$=OBJ_TXT$
0305 LIST_BOX LOAD LB_LIST.CTL,0,USR$+SEP+SSP$+SEP+LIB$+SEP+K_LIB$(1,12)+SEP+TT$+SEP+DAT$+" "+TIM$
0320 GOTO 0240
0330 CLOSE (3); GOTO 0210
0340 CLOSE (2); GOTO 0180
0350 CLOSE (1)
0351 CLOSE (4)
0355 NEXT_ID=BT_EXIT.CTL
0356 LB_LIST.CTL'SORT=1
0360 RETURN 
0400 SEL_SSP: REFRESH_FLG=1
0410 DD=FFN("ZW2"); IF DD<0 THEN DD=4; OPEN (4)"ZW2"
0420 FIND (4,KEY=SSP$,DOM=NO_SSP)AA$
0430 SSP_DESC$=AA$(53,120)
0440 RETURN 
0490 NO_SSP: MSGBOX "Ssp :"+SSP$+" not found",MSG("WARNING"),"!"; NEXT_ID=SSP.CTL,SSP$=""; EXIT 
